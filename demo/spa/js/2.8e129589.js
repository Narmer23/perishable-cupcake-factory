(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{1139:function(e,t,a){"use strict";a("e6cf");var n=a("9440");t["a"]={async getAll(){let{data:e}=await n["a"].get("/rest/uoms");return e},async getById(e){let{data:t}=await n["a"].get(`/rest/uoms/${e}`);return t},async create(e){let{data:t}=await n["a"].post("/rest/uoms",e);return t},async patch(e){let{data:t}=await n["a"].patch("/rest/uoms",e);return t},async delete(e){let{data:t}=await n["a"].delete(`/rest/uoms/${e}`);return t}}},2565:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"row q-col-gutter-md items-stretch"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row items-center justify-between"},[a("div",{staticClass:"col text-h6 text-secondary"},[e._v("\n          Cupcakes e torte\n        ")]),a("div",{staticClass:"col-auto"},[a("q-btn",{attrs:{label:"Crea nuovo dolce",icon:"add",color:"primary"},on:{click:e.createNewCake}})],1)])]),e.loading||e.cakes.length?e._e():a("div",{staticClass:"col-12"},[e._v("\n      Non ci sono dolci disponibili.\n      "),a("q-btn",{attrs:{label:"Creane uno",color:"primary"},on:{click:e.createNewCake}})],1),e._l(e.cakes,(function(t){return a("div",{key:t.id,staticClass:"col-auto"},[a("q-card",{staticClass:"full-height",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"column full-height"},[a("q-card-section",[a("div",{staticClass:"row justify-between items-center"},[a("div",{staticClass:"text-h6 ellipsis"},[e._v("\n                "+e._s(t.name)+"\n              ")]),a("q-chip",{staticClass:"text-bold",attrs:{icon:"euro",label:t.defaultPrice.toFixed(2),color:"primary","text-color":"white"}})],1)]),a("q-card-section",{staticClass:"q-pa-none col"},[a("q-list",{attrs:{dense:""}},[a("q-item-label",{attrs:{header:""}},[e._v("\n                Ingredienti\n              ")]),t.ingredients.length?e._e():a("q-item",[a("q-item-section",{staticClass:"text-caption"},[e._v("\n                  Nessun ingrediente per questo dolce!\n                ")])],1),e._l(t.ingredients,(function(t){return a("q-item",{key:t.id},[a("q-item-section",{staticClass:"text-caption"},[e._v("\n                  "+e._s(t.quantity)+" "+e._s(t.uoM?t.uoM.label:"")+" "+e._s(t.ingredient.name)+"\n                ")])],1)}))],2)],1),a("q-separator"),a("q-card-actions",{staticClass:"justify-end"},[a("q-btn",{attrs:{flat:"",label:"Elimina",icon:"delete",color:"negative"},on:{click:function(a){return e.deleteCake(t.id)}}})],1)],1)])],1)}))],2)])},i=[],r=(a("e6cf"),a("3fe6")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin",staticStyle:{"min-width":"60vw"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("\n        Nuovo dolce\n      ")])]),a("q-card-section",[a("q-input",{attrs:{label:"Nome",error:e.$v.internalCake.name.$error},model:{value:e.internalCake.name,callback:function(t){e.$set(e.internalCake,"name",t)},expression:"internalCake.name"}}),a("q-input",{attrs:{type:"number",label:"Prezzo default",error:e.$v.internalCake.defaultPrice.$error},model:{value:e.internalCake.defaultPrice,callback:function(t){e.$set(e.internalCake,"defaultPrice",t)},expression:"internalCake.defaultPrice"}})],1),a("q-card-section",[a("div",{staticClass:"text-subtitle1"},[e._v("\n        Ricetta\n      ")]),a("div",{staticClass:"row q-col-gutter-sm items-center"},[a("div",{staticClass:"col-2"},[a("q-input",{attrs:{label:"Quantità",type:"number",error:e.$v.newIngredient.quantity.$error},model:{value:e.newIngredient.quantity,callback:function(t){e.$set(e.newIngredient,"quantity",t)},expression:"newIngredient.quantity"}})],1),a("div",{staticClass:"col-3"},[a("q-select",{attrs:{label:"Unità di misura",options:e.uoms,"emit-value":"","map-options":"","option-label":function(e){return Object(e)===e&&e.name+" ("+e.label+")"},error:e.$v.newIngredient.uom.$error},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:[function(e){e.stopPropagation()},e.createNewUom]}})]},proxy:!0}]),model:{value:e.newIngredient.uom,callback:function(t){e.$set(e.newIngredient,"uom",t)},expression:"newIngredient.uom"}})],1),a("div",{staticClass:"col-5"},[a("q-select",{attrs:{label:"Ingrediente",options:e.ingredients,"option-label":"name","emit-value":"","map-options":"",error:e.$v.newIngredient.ingredient.$error},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:[function(e){e.stopPropagation()},e.createNewIngredient]}})]},proxy:!0}]),model:{value:e.newIngredient.ingredient,callback:function(t){e.$set(e.newIngredient,"ingredient",t)},expression:"newIngredient.ingredient"}})],1),a("div",{staticClass:"col-2"},[a("q-btn",{staticClass:"full-width",attrs:{icon:"add",color:"positive",flat:"",disable:e.$v.newIngredient.$invalid},on:{click:function(t){return e.addIngredient(e.newIngredient)}}})],1)]),a("q-list",{attrs:{dense:"",bordered:""}},[e.internalCake.ingredients.length?e._e():a("q-item",[a("q-item-section",[e._v("\n            Nessun ingrediente inserito\n          ")])],1),e._l(e.internalCake.ingredients,(function(t,n){return a("q-item",{key:n},[a("q-item-section",[e._v("\n            "+e._s(t.quantity)+" "+e._s(t.uoM.label)+" "+e._s(t.ingredient.name)+"\n          ")]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{color:"negative",dense:"",round:"",flat:"",icon:"delete"},on:{click:function(t){return e.removeIngredient(n)}}})],1)],1)}))],2)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Salva",disable:e.$v.internalCake.$invalid},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel",flat:""},on:{click:e.onCancelClick}})],1)],1)],1)},l=[],o=a("ded3"),c=a.n(o),d=a("b5ae"),u=a("1139"),g=a("a916"),m=a("3a63"),h={props:["cake"],data(){return{internalCake:{ingredients:[]},uoms:[],ingredients:[],newIngredient:{}}},validations:{newIngredient:{ingredient:{required:d["required"]},uom:{required:d["required"]},quantity:{required:d["required"]}},internalCake:{name:{required:d["required"]},defaultPrice:{required:d["required"]},ingredients:{required:d["required"],$each:{ingredient:{required:d["required"]},uoM:{required:d["required"]},quantity:{required:d["required"]}}}}},async created(){this.uoms=await u["a"].getAll(),this.ingredients=await g["a"].getAll();let e=c()({},this.cake);this.cake.ingredients&&this.cake.ingredients.length?e.ingredients=this.cake.ingredients.map((e=>({ingredient:e.ingredient.id,uoM:e.uom.id,quantity:e.quantity}))):e.ingredients=[],this.internalCake=e},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},async onOKClick(){try{let e;e=this.internalCake.id?await r["a"].patch(this.internalCake):await r["a"].create(this.internalCake),this.$emit("ok",e),this.hide()}catch(e){console.log(e)}},onCancelClick(){this.hide()},addIngredient(e){let t={quantity:e.quantity,ingredient:{id:e.ingredient.id,name:e.ingredient.name},uoM:{label:e.uom.label,id:e.uom.id}};this.internalCake.ingredients.push(t),this.newIngredient={}},removeIngredient(e){this.internalCake.ingredients.splice(e,1)},createNewIngredient(){this.$q.dialog({title:"Nuovo ingrediente",message:"Inserisci il nome dell'ingrediente",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((async e=>{let t={name:e},a=await g["a"].create(t);this.ingredients.push(a),this.$set(this.newIngredient,"ingredient",a)}))},createNewUom(){this.$q.dialog({component:m["a"],parent:this,uom:{}}).onOk((e=>{this.uoms.push(e),this.$set(this.newIngredient,"uom",e)}))}}},p=h,q=a("2877"),k=a("24e8"),C=a("f09f"),f=a("a370"),v=a("27f9"),b=a("ddd8"),w=a("9c40"),y=a("1c1c"),$=a("66e5"),I=a("4074"),_=a("4b7e"),Q=a("eebe"),x=a.n(Q),U=Object(q["a"])(p,s,l,!1,null,null,null),N=U.exports;x()(U,"components",{QDialog:k["a"],QCard:C["a"],QCardSection:f["a"],QInput:v["a"],QSelect:b["a"],QBtn:w["a"],QList:y["a"],QItem:$["a"],QItemSection:I["a"],QCardActions:_["a"]});var S={data(){return{loading:!0,cakes:[]}},async mounted(){try{this.cakes=await r["a"].getAll()}catch(e){this.$q.notify({type:"negative",message:"Errore nel recuperare la lista dei dolci"})}finally{this.loading=!1}},methods:{createNewCake(){this.$q.dialog({component:N,parent:this,cake:{}}).onOk((e=>{this.cakes.push(e)}))},async deleteCake(e){await r["a"].delete(e);let t=this.cakes.findIndex((t=>t.id==e));t>=0&&this.cakes.splice(t,1)}}},O=S,P=a("9989"),A=a("b047"),j=a("0170"),B=a("eb85"),D=Object(q["a"])(O,n,i,!1,null,null,null);t["default"]=D.exports;x()(D,"components",{QPage:P["a"],QBtn:w["a"],QCard:C["a"],QCardSection:f["a"],QChip:A["a"],QList:y["a"],QItemLabel:j["a"],QItem:$["a"],QItemSection:I["a"],QSeparator:B["a"],QCardActions:_["a"]})},"3a63":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("\n        Unità di misura\n      ")])]),a("q-card-section",[a("q-input",{attrs:{label:"Nome",placeholder:"e.g. 'Grammi'",error:e.$v.internalUom.name.$error},model:{value:e.internalUom.name,callback:function(t){e.$set(e.internalUom,"name",t)},expression:"internalUom.name"}}),a("q-input",{attrs:{label:"Etichetta",placeholder:"e.g. 'g'",error:e.$v.internalUom.label.$error},model:{value:e.internalUom.label,callback:function(t){e.$set(e.internalUom,"label",t)},expression:"internalUom.label"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Salva",disable:e.$v.internalUom.$invalid},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel",flat:""},on:{click:e.onCancelClick}})],1)],1)],1)},i=[],r=a("ded3"),s=a.n(r),l=(a("e6cf"),a("b5ae")),o=a("1139"),c={props:["uom"],data(){return{internalUom:{}}},validations:{internalUom:{name:{required:l["required"]},label:{required:l["required"]}}},created(){this.internalUom=s()({},this.uom)},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},async onOKClick(){try{let e;e=this.internalUom.id?await o["a"].patch(this.internalUom):await o["a"].create(this.internalUom),this.$emit("ok",e),this.hide()}catch(e){console.log(e),this.internalUom=s()({},this.uom)}},onCancelClick(){this.hide()}}},d=c,u=a("2877"),g=a("24e8"),m=a("f09f"),h=a("a370"),p=a("27f9"),q=a("4b7e"),k=a("9c40"),C=a("eebe"),f=a.n(C),v=Object(u["a"])(d,n,i,!1,null,null,null);t["a"]=v.exports;f()(v,"components",{QDialog:g["a"],QCard:m["a"],QCardSection:h["a"],QInput:p["a"],QCardActions:q["a"],QBtn:k["a"]})},"3fe6":function(e,t,a){"use strict";a("e6cf");var n=a("9440");t["a"]={async getAll(){let{data:e}=await n["a"].get("/rest/cakes");return e},async getById(e){let{data:t}=await n["a"].get(`/rest/cakes/${e}`);return t},async create(e){let{data:t}=await n["a"].post("/rest/cakes",e);return t},async patch(e){let{data:t}=await n["a"].patch("/rest/cakes",e);return t},async delete(e){let{data:t}=await n["a"].delete(`/rest/cakes/${e}`);return t}}},a916:function(e,t,a){"use strict";a("e6cf");var n=a("9440");t["a"]={async getAll(){let{data:e}=await n["a"].get("/rest/ingredients");return e},async getById(e){let{data:t}=await n["a"].get(`/rest/ingredients/${e}`);return t},async create(e){let{data:t}=await n["a"].post("/rest/ingredients",e);return t},async patch(e){let{data:t}=await n["a"].patch("/rest/ingredients",e);return t},async delete(e){let{data:t}=await n["a"].delete(`/rest/ingredients/${e}`);return t}}}}]);