(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"3a19":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",[a("q-toolbar",{staticClass:"bg-white color-primary"},[a("q-toolbar-title"),a("q-btn",{attrs:{color:"primary",flat:"",icon:"login",label:"Area riservata"},on:{click:e.openLoginModal}})],1)],1),a("q-page-container",[a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"row q-col-gutter-lg items-center justify-center",staticStyle:{"max-width":"1000px"}},[a("img",{staticStyle:{"min-width":"60%"},attrs:{alt:"Logo",src:"pcf_stack.svg"}}),a("div",{staticClass:"col-12"},[a("q-table",{attrs:{data:e.orderedBatches,columns:e.columns,"row-key":"id",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"quantity",attrs:{props:t}},[e._v("\n                    "+e._s(t.row.quantity)+"\n                  ")]),a("q-td",{key:"cake",attrs:{props:t}},[a("q-btn",{attrs:{color:"primary",round:"",flat:"",dense:"",size:"xs",icon:"search"}},[a("q-popup-proxy",[a("q-card",{staticClass:"full-height"},[a("q-card-section",[a("div",{staticClass:"text-h6 ellipsis"},[e._v("\n                              "+e._s(t.row.cake.name)+"\n                            ")])]),a("q-card-section",{staticClass:"q-pa-none"},[a("q-list",{attrs:{dense:""}},[a("q-item-label",{attrs:{header:""}},[e._v("\n                                Ingredienti\n                              ")]),t.row.cake.ingredients.length?e._e():a("q-item",[a("q-item-section",{staticClass:"text-caption"},[e._v("\n                                  Nessun ingrediente per questo dolce!\n                                ")])],1),e._l(t.row.cake.ingredients,(function(t){return a("q-item",{key:t.id},[a("q-item-section",{staticClass:"text-caption"},[e._v("\n                                  "+e._s(t.quantity)+" "+e._s(t.uoM?t.uoM.label:"")+" "+e._s(t.ingredient.name)+"\n                                ")])],1)}))],2)],1)],1)],1)],1),e._v("\n                    "+e._s(t.row.cake.name)+"\n                  ")],1),a("q-td",{key:"elapsedTime",attrs:{props:t}},[e._v("\n                    "+e._s(e._f("date")(t.row.productionDate,"calendar"))+"\n                  ")]),a("q-td",{key:"discount",attrs:{props:t}},[e._v("\n                    "+e._s((100*(1-t.row.priceModifier)).toFixed(2))+" %\n                  ")]),a("q-td",{key:"sellPrice",attrs:{props:t}},[e._v("\n                    "+e._s((t.row.batchPrice*t.row.priceModifier).toFixed(2))+" €\n                  ")])],1)]}}])})],1)])])])],1)],1)},i=[],r=a("ded3"),s=a.n(r),o=(a("e6cf"),a("2f62")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("\n        Login\n      ")])]),a("q-card-section",[a("q-input",{attrs:{label:"Email",error:e.$v.credentials.email.$error},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"mail"}})]},proxy:!0}]),model:{value:e.credentials.email,callback:function(t){e.$set(e.credentials,"email",t)},expression:"credentials.email"}}),a("q-input",{attrs:{icon:"password",type:"password",label:"Password",error:e.$v.credentials.password.$error},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"lock"}})]},proxy:!0}]),model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}}),e.error?a("p",{staticClass:"text-negative"},[e._v("\n        Username o password non valide\n      ")]):e._e()],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",icon:"login",label:"Login",disable:e.$v.credentials.$invalid},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel",flat:""},on:{click:e.onCancelClick}})],1)],1)],1)},c=[],d=a("b5ae"),p=a("9440"),u={async login(e){let{data:t}=await p["a"].post("/rest/login",e);return t}},h={data(){return{credentials:{email:"luana.verdi@cupcakefactory.it",password:"cupcake"},error:!1}},validations:{credentials:{email:{required:d["required"]},password:{required:d["required"]}}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},async onOKClick(){try{let e=await u.login(this.credentials);this.$emit("ok",e),this.hide()}catch(e){console.log(e),this.error=!0,this.credentials.password=""}},onCancelClick(){this.hide()}}},g=h,m=a("2877"),b=a("24e8"),q=a("f09f"),w=a("a370"),y=a("27f9"),f=a("0016"),v=a("4b7e"),k=a("9c40"),_=a("eebe"),C=a.n(_),Q=Object(m["a"])(g,l,c,!1,null,null,null),x=Q.exports;C()(Q,"components",{QDialog:b["a"],QCard:q["a"],QCardSection:w["a"],QInput:y["a"],QIcon:f["a"],QCardActions:v["a"],QBtn:k["a"]});var $=a("7399"),P=a("2ef0"),S=a.n(P),A={data(){return{now:new Date,pagination:{rowsPerPage:15,page:1},columns:[{name:"quantity",align:"center",label:"Quantità",sortable:!0},{name:"cake",align:"left",label:"Dolce",sortable:!0},{name:"elapsedTime",align:"left",label:"Sfornato",field:"quantity",sortable:!0},{name:"discount",align:"center",label:"Sconto"},{name:"sellPrice",align:"center",label:"Prezzo cad.",sortable:!0}],batches:[]}},computed:s()(s()({},Object(o["b"])({isAuthenticated:e=>e.auth.isAuthenticated})),{},{orderedBatches(){return S.a.orderBy(this.batches,"productionDate",["desc"])}}),async mounted(){this.batches=await $["a"].getAvailable(+this.now)},methods:{openLoginModal(){this.isAuthenticated?this.$router.push("/admin"):this.$q.dialog({component:x,parent:this}).onOk((e=>{this.$store.commit("auth/changeUser",e),this.$router.push("/admin")}))}}},L=A,T=a("4d5a"),D=a("e359"),I=a("65c6"),B=a("6ac5"),M=a("09e3"),O=a("9989"),j=a("eaac"),E=a("bd08"),H=a("db86"),z=a("7cbe"),F=a("1c1c"),J=a("0170"),K=a("66e5"),U=a("4074"),N=Object(m["a"])(L,n,i,!1,null,null,null);t["default"]=N.exports;C()(N,"components",{QLayout:T["a"],QHeader:D["a"],QToolbar:I["a"],QToolbarTitle:B["a"],QBtn:k["a"],QPageContainer:M["a"],QPage:O["a"],QTable:j["a"],QTr:E["a"],QTd:H["a"],QPopupProxy:z["a"],QCard:q["a"],QCardSection:w["a"],QList:F["a"],QItemLabel:J["a"],QItem:K["a"],QItemSection:U["a"]})},7399:function(e,t,a){"use strict";a("e6cf");var n=a("9440");t["a"]={async getAvailable(e){let{data:t}=await n["a"].get("/rpc/batches/available",{params:{untilDate:e}});return t},async getAllWithExpire(e){let{data:t}=await n["a"].get("/rpc/batches/all",{params:{expireTarget:e}});return t},async getAll(){let{data:e}=await n["a"].get("/rest/batches");return e},async getById(e){let{data:t}=await n["a"].get(`/rest/batches/${e}`);return t},async create(e){let{data:t}=await n["a"].post("/rest/batches",e);return t},async patch(e){let{data:t}=await n["a"].patch("/rest/batches",e);return t},async delete(e){let{data:t}=await n["a"].delete(`/rest/batches/${e}`);return t}}}}]);